# 【000】lock 概念

## lock 的分类
- [不懂什么是 Java 中的锁？看看这篇你就明白了！](https://mp.weixin.qq.com/s/GU42BjM5jY2CEMVD_PAZBQ)
> - 从线程是否需要对资源加锁可以分为：`悲观锁`、`乐观锁`
> - 从资源已被锁定，线程是否阻塞可以分为：`自旋锁`
> - 从多个线程并发访问资源，也就是 Synchronized 可以分为：`无锁`、`偏向锁`、`轻量级锁`、`重量级锁`
> - 从锁的公平性进行区分，可以分为：`公平锁`、`非公平锁`
> - 从根据锁是否重复获取可以分为：`可重入锁`、`不可重入锁`
> - 从那个多个线程能否获取同一把锁分为：`共享锁`、`排他锁`

## 概念
### 悲观锁、乐观锁
悲观锁：  
  总认为最坏的情况可能会出现，它认为数据很可能会被其他人所修改。  
  所以悲观锁在持有数据的时候总会把`资源`或者`数据`锁住，这样其他线程想要请求这个资源的时候就会阻塞，直到悲观锁把资源释放为止。
  （无论 读/写 都会加锁）

乐观锁：  
  总认为资源和数据不会被别人所修改，所以读取不会上锁，但是乐观锁在进行写入操作的时候会判断当前数据是否被修改过。
  （读不加锁，写加锁。一般基于 CAS 或 版本号控制 实现，也可能是结合两者实现）。

乐观锁缺陷：
  - ABA问题
  - 重试机制采用循环（自旋锁），自旋循环对于性能开销比较大



